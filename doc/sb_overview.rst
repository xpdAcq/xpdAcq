.. _sb_overview:

Overview of xpd acquisition environment
---------------------------------------

All experiments will be carried out in the ``~/xpdUser`` directory tree.

At the beginning of the beamtime users are presented with a standard set of directories
inside  ``~/xpdUser``.  The directories and their purpose are shown in the table
below.

All the directories will be empty initially, except that users can place predefined
files that can help accelerate experiments in ``Import`` directory. Normally this
file will be generated by running a simulated experiment using the xpdAcq.
If these files doesn't exist that is not a problem, but there will be much more
typing to set up the metadata during beamtime.

Once the directories are set-up, the experiment is run by typing `icollection`
which places you into an ``ipython`` session.  The available commands and workflow
are described under :ref:`xpdu`.

Table of directories and their uses:

+---------------+------------------------------------------------------------+
|directory name |contents                                                    |
+===============+============================================================+
|Import         |User places here their pre-made files user scripts (.py),   |
|               |detector-image mask files (.npy), files containing xpdAcq   |
|               |objects (extension .yml) or an archived file made of mix of |
|               |them. User can use ``import_userScriptsEtc`` to unpack and  |
|               |import those files.                                         |
+---------------+------------------------------------------------------------+
|config_base    |This contains the config file and mask file                 |
|               |used by ``xPDFsuite`` and                                   |
|               |xpdacq. Only the programs should write in this directory    |
|               |Users must not edit or add anything to this directory.      |
+---------------+------------------------------------------------------------+
|tif_base       |This is where all the image files (.tiff) are stored *that* |
|               |*the user extracts* from the database using dataBroker      |
|               |scripts during the experiment.                              |
+---------------+------------------------------------------------------------+
|userScripts    |This is a handy space where the users can write their own   |
|               |experiment scripts and save them. They will be bundled up   |
|               |at the end of the experiment for shipping home              |
+---------------+------------------------------------------------------------+
|userAnalysis   |Users can create any sets of directories under here for     |
|               |storing analyzed files (for example, saved by xPDFsuite).   |
|               |it is expected that most of these will be 1D files such as  |
|               |raw 1D diffraction intensities, g(r) and F(Q) files.        |
+---------------+------------------------------------------------------------+
|...            |Actually, the users can create any directories and files    |
|               |they want and they will be bundled, tarred and zipped at the|
|               |end for them to take home.                                  |
+---------------+------------------------------------------------------------+

For detailed information, proceed to **XPD user** section

For a simple instruction, proceed to :ref:`qs`
