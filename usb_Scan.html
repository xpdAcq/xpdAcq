<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ScanPlan objects &mdash; xpdAcq 1.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Where did all my Sample and Scan objects go?????" href="usb_Where.html" />
    <link rel="prev" title="Setting up your XPD acquisition objects" href="usb_Experiment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> xpdAcq
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="xpdusers.html">For XPD Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sb_overview.html">Overview of xpd acquisition environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="sb_icollection.html">Overview of the bsui+xpdAcq environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Beamtime.html">Setting up your Beamtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Experiment.html">Setting up your XPD acquisition objects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ScanPlan objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-scanplans">Setting up ScanPlans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-table-on-scanplan">Summary table on ScanPlan:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html">Where did all my Sample and Scan objects go?????</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-is-your-friends">bt.list() is your friends</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-gotchas">bt.list() Gotchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Running.html">Running scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_QuickAssess.html">Initial assessment of your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_GlobalOptions.html">xpdAcq Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="db_export.html">Databroker Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot.html">Using the Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomo.html">Running Tomography</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_design.html">An overhaul at v1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_calibration.html">Automated Calibration Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_darkframe.html">Automatic Dark Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_mask.html">Mask Data Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_shutter.html">Automatic Shutter Control</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">For Beamline Staff</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">xpdAcq Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xpdAcq</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="xpdusers.html">For XPD Users</a> &raquo;</li>
      <li>ScanPlan objects</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usb_Scan.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scanplan-objects">
<span id="usb-scan"></span><h1>ScanPlan objects<a class="headerlink" href="#scanplan-objects" title="Permalink to this heading"></a></h1>
<p>Firstly, what is a scanplan?  A scanplan is a grouped set of detector exposures.  The set may
contain just one exposure (we call that a count scan, <code class="docutils literal notranslate"><span class="pre">'ct'</span></code> ).  Or it may be a series of exposures
taken one after the other, possibly with a delay between.  We
call that a time-series (or <code class="docutils literal notranslate"><span class="pre">'tseries'</span></code> ).  We also support two kinds of temperature related scanplans, which are temperature ramp, <code class="docutils literal notranslate"><span class="pre">'Tramp'</span></code> and temperature list, <code class="docutils literal notranslate"><span class="pre">Tlist</span></code>. More are also on the way, but
these simple scanplans may also be combined together in scripts, giving the user significant
control over how to construct their experiment.
Firstly, what is a ScanPlan?  A <code class="docutils literal notranslate"><span class="pre">ScanPlan</span></code> is a grouped set of detector exposures.  The set may
contain just one exposure (we call that a count scan, <code class="docutils literal notranslate"><span class="pre">ct</span></code> ).  Or it may be a series of exposures
taken one after the other, possibly with a delay between.  We call that a time-series (or <code class="docutils literal notranslate"><span class="pre">tseries</span></code> ).
Other temperature-related plans supported are temperature ramp, <code class="docutils literal notranslate"><span class="pre">Tramp</span></code> and temperature list scan, <code class="docutils literal notranslate"><span class="pre">Tlist</span></code>.
More are also on the way, but these simple <code class="docutils literal notranslate"><span class="pre">ScanPlan</span></code> may also be combined together in scripts,
giving the user significant control over how to construct their experiment.</p>
<p>To run a scan we need a <code class="docutils literal notranslate"><span class="pre">ScanPlan</span></code> and a <code class="docutils literal notranslate"><span class="pre">Sample</span></code>.  The <code class="docutils literal notranslate"><span class="pre">ScanPlan</span></code> is the detailed description of
what the scan will do, but it doesn’t generate <em>any</em> scan until it is run on a particular sample.
Separating a scan into a plan and an execution (which is different than how SPEC works
for those old enough) makes it very easy to run a number of different samples with the
exact same <code class="docutils literal notranslate"><span class="pre">ScanPlan</span></code>, or (if you really want to) to collect dark images with exactly the same scan pattern, and so on.
We also want to save scan metadata accurately when the scan is actually run.  To ensure this,
each scan object takes the scanplan parameters and it uses the same parameters
both to run the scan at run-time, and to save them, along with the sample information,
in the metadata for each exposure.</p>
<p>With this in mind, the workflow is that <em>we never edit a ScanPlan and rerun it</em> (stop that you SPEC people!).
What we do is that we <strong>create a new ScanPlan object</strong>,
every time we want to do a different, <em>even slightly different</em>, scan. These are all
saved for reload and will be sent home with you at the end of the experiment.</p>
<section id="setting-up-scanplans">
<h2>Setting up ScanPlans<a class="headerlink" href="#setting-up-scanplans" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ScanPlan</span></code> takes <code class="docutils literal notranslate"><span class="pre">Beamtime</span></code>, scanplan and corresponding arguments. Let’s type <code class="docutils literal notranslate"><span class="pre">ScanPlan?</span></code> and hit return to find out more:</p>
<p>Here are some examples of valid count-type ScanPlan definitions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="n">bt</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>                      <span class="c1"># the simplest count scan definition</span>
</pre></div>
</div>
<dl class="simple">
<dt>A few things to note:</dt><dd><ul class="simple">
<li><p>First argument is always <code class="docutils literal notranslate"><span class="pre">bt</span></code>, the <code class="docutils literal notranslate"><span class="pre">Beamtime</span></code> object.</p></li>
<li><p>The second argument is always the scanplan. In the example above, we
are using <em>count</em>, so we use <code class="docutils literal notranslate"><span class="pre">ct</span></code> as the second argument.</p></li>
<li><p>The scan parameter is fed in after scan type, starting from the third positional argument.</p></li>
</ul>
</dd>
<dt>Types of ScanPlan available in current version:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ct</span></code> just exposes the detector for a number of seconds. e.g.,  <code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">ct,</span> <span class="pre">17.5)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tseries</span></code> executes a series of <code class="docutils literal notranslate"><span class="pre">num</span></code> counts of exposure time <code class="docutils literal notranslate"><span class="pre">exposure</span></code> seconds with  a delay of <code class="docutils literal notranslate"><span class="pre">delay</span></code> seconds between them.  e.g., <code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">tseries,</span> <span class="pre">1,</span> <span class="pre">59,</span> <span class="pre">50)</span></code> will measure 50 scans of 1 second with a delay of 59 seconds in between each of them.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tramp</span></code> executes a temperature ramp from <code class="docutils literal notranslate"><span class="pre">'startingT'</span></code> to <code class="docutils literal notranslate"><span class="pre">'endingT'</span></code> in temperature steps of <code class="docutils literal notranslate"><span class="pre">Tstep</span></code> with exposure time of <code class="docutils literal notranslate"><span class="pre">exposure</span></code>.  e.g., <code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">Tramp,</span> <span class="pre">1,</span> <span class="pre">200,</span> <span class="pre">500,</span> <span class="pre">5)</span></code> will automatically change the temperature,
starting at 200 K and ending at 500 K, measuring a scan of 1 s at every 5 K step. The temperature controller will hold at each temperature until the temperature stabilizes before starting the measurement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tlist</span></code> exposes the detector for a given exposure time <code class="docutils literal notranslate"><span class="pre">exposure</span></code>
in seconds at each temperature from a user-defined temperature
list. For example, <code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">Tlist,</span> <span class="pre">20,</span> <span class="pre">[250,</span> <span class="pre">180,</span> <span class="pre">200,</span> <span class="pre">230])</span></code>
will drive the temperature controller to 250K, 180K, 200K and 230K
and expose the detector for 20 seconds after the temperature
controller equilibrates at each of the temperatures.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="summary-table-on-scanplan">
<h2>Summary table on ScanPlan:<a class="headerlink" href="#summary-table-on-scanplan" title="Permalink to this heading"></a></h2>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 34%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ScanPlan</p></th>
<th class="head"><p>Syntax</p></th>
<th class="head"><p>Summary</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ct</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">ct,</span> <span class="pre">17.5)</span></code></p></td>
<td><p>a count scan for 17.5s</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tseries</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">tseries,</span> <span class="pre">1,</span> <span class="pre">59,</span> <span class="pre">50)</span></code></p></td>
<td><p>time series with 1s count time, 59s delay and 50 repeats</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Tramp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">Tramp</span> <span class="pre">,</span> <span class="pre">1,</span> <span class="pre">200,</span> <span class="pre">500,</span> <span class="pre">5)</span></code></p></td>
<td><p>temperature series with 1s count time, starting from 300k to 200k with 5k per step</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Tlist</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ScanPlan(bt,</span> <span class="pre">Tlist,</span> <span class="pre">5,</span> <span class="pre">[250,</span> <span class="pre">180,</span> <span class="pre">200,</span> <span class="pre">230])</span></code></p></td>
<td><p>exposure detector for 5s at 250K, 180K, 200K and 230K</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>OK, it is time to <a class="reference internal" href="usb_Running.html#usb-running"><span class="std std-ref">run our scans</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usb_Experiment.html" class="btn btn-neutral float-left" title="Setting up your XPD acquisition objects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usb_Where.html" class="btn btn-neutral float-right" title="Where did all my Sample and Scan objects go?????" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright (c) 2016 trustees of Columbia University in the City of New York.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>