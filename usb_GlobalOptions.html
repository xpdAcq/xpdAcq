<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>xpdAcq Configuration &mdash; xpdAcq 1.1.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Databroker Export" href="db_export.html" />
    <link rel="prev" title="Initial assessment of your data" href="usb_QuickAssess.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> xpdAcq
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="xpdusers.html">For XPD Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sb_overview.html">Overview of xpd acquisition environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="sb_icollection.html">Overview of the bsui+xpdAcq environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Beamtime.html">Setting up your Beamtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Experiment.html">Setting up your XPD acquisition objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Scan.html">ScanPlan objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html">Where did all my Sample and Scan objects go?????</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-is-your-friends">bt.list() is your friends</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-gotchas">bt.list() Gotchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Running.html">Running scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_QuickAssess.html">Initial assessment of your data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">xpdAcq Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#funtionality-related-options">Funtionality related options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-related-options">Device-related options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="db_export.html">Databroker Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot.html">Using the Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="tomo.html">Running Tomography</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_design.html">An overhaul at v1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_calibration.html">Automated Calibration Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_darkframe.html">Automatic Dark Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_mask.html">Mask Data Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_shutter.html">Automatic Shutter Control</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">For Beamline Staff</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">xpdAcq Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xpdAcq</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="xpdusers.html">For XPD Users</a> &raquo;</li>
      <li>xpdAcq Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usb_GlobalOptions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="xpdacq-configuration">
<span id="usb-globaloptions"></span><h1>xpdAcq Configuration<a class="headerlink" href="#xpdacq-configuration" title="Permalink to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> uses <code class="docutils literal notranslate"><span class="pre">glbl</span></code> and <code class="docutils literal notranslate"><span class="pre">xpd_configuration</span></code> to controls the overall behavior of the beamtime.
All of the values of the <code class="docutils literal notranslate"><span class="pre">glbl</span></code> and <code class="docutils literal notranslate"><span class="pre">xpd_configuration</span></code> have reasonable default values, but these can be interrogated and overwritten.</p>
<section id="funtionality-related-options">
<h2>Funtionality related options<a class="headerlink" href="#funtionality-related-options" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p>Functionality related options are managed by <code class="docutils literal notranslate"><span class="pre">glbl</span></code> and you can
interrogate the default values by typing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">glbl</span>
</pre></div>
</div>
<p>You can also change them if needed. Here are few possible scenarios:</p>
<p><strong>No automated dark collection logic at all:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="p">[</span><span class="s1">&#39;auto_dark&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">glbl</span><span class="p">[</span><span class="s1">&#39;shutter_control&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p><strong>Want a fresh dark frame every time ``xrun`` is triggered:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="p">[</span><span class="s1">&#39;dk_window&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># dark window is 0.1 min = 6 secs</span>
</pre></div>
</div>
<p><strong>Want a 0.2s exposure time per frame instead of 0.1s:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">glbl</span><span class="p">[</span><span class="s1">&#39;frame_acq_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span>
</pre></div>
</div>
<p>changes made to <code class="docutils literal notranslate"><span class="pre">glbl</span></code> will be recovered after coming back to <code class="docutils literal notranslate"><span class="pre">ipython</span></code> session.
So you don’t have to redo the changes from time to time.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">glbl</span></code> also has a <code class="docutils literal notranslate"><span class="pre">swap</span></code> method. This method allows you to
temporarally change the value of a key in the <code class="docutils literal notranslate"><span class="pre">glbl</span></code>. For instance</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">glbl</span><span class="o">.</span><span class="n">swap</span><span class="p">(</span><span class="n">dk_window</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">xrun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>This will run the scan with a dark window of 1000 seconds. However all
subsequent scans would have their dark window set to the old dark window.
This is very useful for overnight scans where the state of the <code class="docutils literal notranslate"><span class="pre">glbl</span></code>
might not be remembered.</p>
</div></blockquote>
</section>
<section id="device-related-options">
<span id="usb-deviceoptions"></span><h2>Device-related options<a class="headerlink" href="#device-related-options" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p>Device related configurations are stored in <code class="docutils literal notranslate"><span class="pre">xpd_configuration</span></code>
and you can interrogate the default values by typing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xpd_configuration</span>
</pre></div>
</div>
<p>You may also change the defaults:</p>
<p><strong>Want to run temperature ramp with different device:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xpd_configuration</span><span class="p">[</span><span class="s1">&#39;temp_controller&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">eurotherm</span>
</pre></div>
</div>
<p><strong>Want to use alternative shutter:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xpd_configuration</span><span class="p">[</span><span class="s1">&#39;shutter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shctl2</span>
</pre></div>
</div>
<p>All of the changes applied to <code class="docutils literal notranslate"><span class="pre">xpd_configuration</span></code> only lives
within one <code class="docutils literal notranslate"><span class="pre">ipython</span></code> session. So if you exit out the terminal and
come back, remember to repeat the configuration step <em>again</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>desired objects (<code class="docutils literal notranslate"><span class="pre">eurotherm</span></code> and <code class="docutils literal notranslate"><span class="pre">shctl2</span></code> above, for example) should be properly <em>configured</em>. How to properly configure a device is beyond the scope of this website, if you have specific requests, please contact beamline staff for more details.</p>
</div>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usb_QuickAssess.html" class="btn btn-neutral float-left" title="Initial assessment of your data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="db_export.html" class="btn btn-neutral float-right" title="Databroker Export" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright (c) 2016 trustees of Columbia University in the City of New York.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>